<html layout:decorate="~{layout}" xmlns:layout="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml">
<div layout:fragment="content" class="container mar">
    <h2>임시 텍스트</h2>
    <h5>책 등록</h5>
    <form th:object="${bookEnrollForm}" th:action="@{/book/enroll}" method="post">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
        <div th:replace="~{form_errors :: formErrorsFragment}"></div>

        <!--      <input type="hidden" th:name="target" th:value="hidden_target" />-->
        <div class="mb-3">
            <label for="title" class="form-label">제목</label>
            <input type="text" id="title" th:field="*{title}" class="form-control">
        </div>
<!--        <div class="mb-3">-->
<!--            <label for="isbn" class="form-label">ISBN<h6></h6></label>-->
<!--            <input type="text" id="isbn" th:field="*{isbn}" class="form-control">-->
<!--        </div>-->
        <div class="mb-3">
            <label for="language" class="form-label">언어</label>
            <input type="text" id="language" th:field="*{language}" class="form-control">
        </div>
        <div class="mb-3">
            <label for="price" class="form-label">가격</label>
            <input type="number" id="price" th:field="*{price}" class="form-control" min="0" step="1">
        </div>
        <div class="mb-3">
            <label for="author" class="form-label">저자</label>
            <input type="text" id="author" th:field="*{author}" class="form-control">
        </div>
        <div class="mb-3">
            <label for="publisher" class="form-label">출판사</label>
            <input type="text" id="publisher" th:field="*{publisher}" class="form-control">
        </div>
        <div class="mb-3">
            <label for="first_publication" class="form-label">발행일</label>
            <input type="date" id="first_publication" th:field="*{first_publication}" class="form-control">
        </div>

        <input type="submit" value="등록하기" class="button">
    </form>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        let dateInput = document.getElementById("first_publication");

        // 오늘 날짜 가져오기 (YYYY-MM-DD 형식)
        let today = new Date().toISOString().split("T")[0];

        // 최대 날짜를 오늘로 설정
        dateInput.setAttribute("max", today);

        // 사용자가 미래 날짜를 선택할 경우 자동으로 현재 날짜로 조정
        dateInput.addEventListener("change", function() {
            if (dateInput.value > today) {
                alert("발행일은 오늘보다 미래 날짜를 선택할 수 없습니다.");
                dateInput.value = today;
            }
        });
    });
</script>
</html>