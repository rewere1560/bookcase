-- H2 2.3.232;
;             
CREATE USER IF NOT EXISTS "SA" SALT '1b5aee9b800d9b55' HASH '66cdff922db9eff903ebe7be2d05c9720ed1ea62c1135b028125ce709d1b83ab' ADMIN;         
CREATE CACHED TABLE "PUBLIC"."AUTHOR"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "NAME" CHARACTER VARYING(255)
);      
ALTER TABLE "PUBLIC"."AUTHOR" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_7" PRIMARY KEY("ID");       
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.AUTHOR;  
CREATE CACHED TABLE "PUBLIC"."COLLECTION_BOOK"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 98) NOT NULL,
    "BOOK_ID" INTEGER,
    "COLLECTION_ID" INTEGER
);           
ALTER TABLE "PUBLIC"."COLLECTION_BOOK" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8" PRIMARY KEY("ID");              
-- 6 +/- SELECT COUNT(*) FROM PUBLIC.COLLECTION_BOOK;         
INSERT INTO "PUBLIC"."COLLECTION_BOOK" VALUES
(1, 1, 1),
(2, 33, 1),
(3, 33, 33),
(33, 1, 65),
(34, 65, 65),
(66, 65, 1);               
CREATE CACHED TABLE "PUBLIC"."BOOK"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 225) NOT NULL,
    "AUTHOR" CHARACTER VARYING(255),
    "CREATE_DATE" TIMESTAMP(6),
    "FIRST_PUBLICATION" TIMESTAMP(6),
    "ISBN" CHARACTER VARYING(17),
    "LANGUAGE" CHARACTER VARYING(200),
    "MODIFY_DATE" TIMESTAMP(6),
    "PRICE" NUMERIC(38, 2),
    "PUBLISHER" CHARACTER VARYING(255),
    "TITLE" CHARACTER VARYING(200)
);      
ALTER TABLE "PUBLIC"."BOOK" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_1" PRIMARY KEY("ID");         
-- 10 +/- SELECT COUNT(*) FROM PUBLIC.BOOK;   
INSERT INTO "PUBLIC"."BOOK" VALUES
(1, '1', NULL, TIMESTAMP '2025-02-25 00:00:00', NULL, 'w', NULL, 1.00, '1', 'w'),
(2, '1', NULL, TIMESTAMP '2025-02-24 00:00:00', NULL, '1', NULL, 1.00, '1', '1'),
(33, U&'\3137\3148\3131', NULL, TIMESTAMP '2025-02-25 00:00:00', NULL, U&'\3137', NULL, 23.00, U&'\3131\3137', U&'\3131\3137'),
(65, 'we', NULL, TIMESTAMP '2025-03-31 00:00:00', NULL, 'we', NULL, 2.00, 'e', 'e'),
(97, '2', TIMESTAMP '2025-04-09 19:52:13.262565', TIMESTAMP '2025-04-09 07:52:00', NULL, 'q', NULL, 2.00, '2', 'q'),
(98, '43', TIMESTAMP '2025-04-09 20:02:51.65758', TIMESTAMP '2025-04-16 20:02:00', NULL, 't', NULL, 3.00, '43', 't'),
(129, '564', TIMESTAMP '2025-04-09 20:06:27.279995', TIMESTAMP '2025-02-05 17:05:00', NULL, '546', NULL, 564.00, '56', '65'),
(130, '09', TIMESTAMP '2025-04-09 20:06:44.487408', TIMESTAMP '2025-04-10 20:06:00', NULL, '90', NULL, 909.00, '0', '90'),
(161, U&'\3148\3137', TIMESTAMP '2025-04-09 20:08:33.598988', TIMESTAMP '2025-04-10 20:08:00', NULL, U&'\3137\3148', NULL, 9.00, U&'\3137\3148', U&'\3137\3148'),
(193, '43', TIMESTAMP '2025-04-09 20:09:54.160896', TIMESTAMP '2025-04-10 20:09:00', NULL, U&'\3137\3131', NULL, 43.00, '34', U&'\3137\3131');    
CREATE CACHED TABLE "PUBLIC"."MY_SHELF"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "DETAIL" CHARACTER VARYING(255),
    "CREATE_DATE" TIMESTAMP(6),
    "IS_DELETED" BOOLEAN,
    "IS_PUBLIC" BOOLEAN,
    "MODIFY_DATE" TIMESTAMP(6),
    "NAME" CHARACTER VARYING(255),
    "USER_ID" BIGINT
);
ALTER TABLE "PUBLIC"."MY_SHELF" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("ID");     
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.MY_SHELF;
CREATE CACHED TABLE "PUBLIC"."PUBLISHER"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "NAME" CHARACTER VARYING(255)
);   
ALTER TABLE "PUBLIC"."PUBLISHER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_F" PRIMARY KEY("ID");    
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.PUBLISHER;               
CREATE CACHED TABLE "PUBLIC"."RECOMMEND"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "FIRST_RECOMMED_DATE" TIMESTAMP(6),
    "RECENT_RECOMMED_DATE" TIMESTAMP(6),
    "RECOMMEND_NUMBER" INTEGER DEFAULT 0,
    "TARGET_ID" INTEGER,
    "TYPE" ENUM('AUTHOR', 'BOOK'),
    "TARGET" INTEGER,
    "USER_ID" BIGINT
);             
ALTER TABLE "PUBLIC"."RECOMMEND" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_E" PRIMARY KEY("ID");    
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.RECOMMEND;               
CREATE CACHED TABLE "PUBLIC"."RECOMMENDATION_TARGET"(
    "TARGET_TYPE" CHARACTER VARYING(31) NOT NULL,
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "AUTHOR_ID" INTEGER,
    "BOOK_ID" INTEGER
);      
ALTER TABLE "PUBLIC"."RECOMMENDATION_TARGET" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_89" PRIMARY KEY("ID");       
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.RECOMMENDATION_TARGET;   
CREATE CACHED TABLE "PUBLIC"."SITE_USER"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 65) NOT NULL,
    "CREATE_DATE" TIMESTAMP(6),
    "EMAIL" CHARACTER VARYING(255),
    "MODIFY_DATE" TIMESTAMP(6),
    "PASSWORD" CHARACTER VARYING(255),
    "USERNAME" CHARACTER VARYING(255)
); 
ALTER TABLE "PUBLIC"."SITE_USER" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_88" PRIMARY KEY("ID");   
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.SITE_USER;               
INSERT INTO "PUBLIC"."SITE_USER" VALUES
(1, TIMESTAMP '2025-03-28 20:28:07.624127', 'sleeper1224@gmail.com', NULL, '$2a$10$.gtmwe.wRVWwiBQTZlcnUeg6mxjAqCeQJ5nInLD/d877CseLP7yWi', 'stpler'),
(33, TIMESTAMP '2025-04-07 19:55:24.438702', 'ware1224@gmail.com', NULL, '$2a$10$vpIITFS26ePUwge51MwJUe1teiXA/NCcWitI3Q23a6oTKZbcrtUmS', 'DDD');              
CREATE CACHED TABLE "PUBLIC"."MY_COLLECTION"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 193) NOT NULL,
    "CONTENT" CHARACTER VARYING,
    "NAME" CHARACTER VARYING(255),
    "OWNER_ID" BIGINT,
    "CREATE_DATE" TIMESTAMP(6),
    "DELETE_DATE" TIMESTAMP(6),
    "DELETEYN" BOOLEAN DEFAULT FALSE,
    "MODIFY_DATE" TIMESTAMP(6),
    "RELEASEYN" BOOLEAN
);
ALTER TABLE "PUBLIC"."MY_COLLECTION" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6" PRIMARY KEY("ID");
-- 7 +/- SELECT COUNT(*) FROM PUBLIC.MY_COLLECTION;           
INSERT INTO "PUBLIC"."MY_COLLECTION" VALUES
(1, 'qwq', 'staff', 1, NULL, NULL, FALSE, TIMESTAMP '2025-04-09 18:06:42.137696', TRUE),
(33, 'fd', 'df', 1, NULL, NULL, FALSE, NULL, FALSE),
(65, '', U&'\d14c\c2a4\d2b8 \bb36\c74c1', 1, TIMESTAMP '2025-04-07 19:26:21.723111', NULL, FALSE, TIMESTAMP '2025-04-09 20:15:00.690295', TRUE),
(97, '', U&'\d14c\c2a4\d2b8 \bb36\c74c2', 1, TIMESTAMP '2025-04-07 19:28:17.950019', NULL, FALSE, TIMESTAMP '2025-04-09 20:14:53.440907', TRUE),
(129, '', 'DDD', 33, TIMESTAMP '2025-04-07 19:55:49.1731', NULL, FALSE, TIMESTAMP '2025-04-07 19:55:58.203286', TRUE),
(130, '', 'TT', 33, TIMESTAMP '2025-04-07 19:56:23.268517', NULL, FALSE, NULL, NULL),
(161, '1234', U&'\d14c\c2a4\d2b8 \bb36\c74c3', 1, TIMESTAMP '2025-04-09 20:14:26.112151', NULL, FALSE, TIMESTAMP '2025-04-09 20:14:35.506557', TRUE);         
ALTER TABLE "PUBLIC"."SITE_USER" ADD CONSTRAINT "PUBLIC"."UKJERLW3G2URNH55WCRM2B5KQNJ" UNIQUE NULLS DISTINCT ("USERNAME");    
ALTER TABLE "PUBLIC"."RECOMMENDATION_TARGET" ADD CONSTRAINT "PUBLIC"."UK8520DJ2O7NBWEM9PHNJDKW7F5" UNIQUE NULLS DISTINCT ("BOOK_ID");         
ALTER TABLE "PUBLIC"."SITE_USER" ADD CONSTRAINT "PUBLIC"."UK8VLKW482T3GPNEBXCM03YWK9P" UNIQUE NULLS DISTINCT ("EMAIL");       
ALTER TABLE "PUBLIC"."BOOK" ADD CONSTRAINT "PUBLIC"."UKEHPDFJPU1JM3HIJHJ4MM0HX9H" UNIQUE NULLS DISTINCT ("ISBN");             
ALTER TABLE "PUBLIC"."RECOMMENDATION_TARGET" ADD CONSTRAINT "PUBLIC"."UK3KLJK7MY1VSKAOTHUMGF2777E" UNIQUE NULLS DISTINCT ("AUTHOR_ID");       
ALTER TABLE "PUBLIC"."RECOMMENDATION_TARGET" ADD CONSTRAINT "PUBLIC"."FK4WL5GE4AYFXSN6N1B64XQNDYR" FOREIGN KEY("AUTHOR_ID") REFERENCES "PUBLIC"."AUTHOR"("ID") NOCHECK;       
ALTER TABLE "PUBLIC"."MY_COLLECTION" ADD CONSTRAINT "PUBLIC"."FKR76TE5T65V49GUDT64GGJK4TS" FOREIGN KEY("OWNER_ID") REFERENCES "PUBLIC"."SITE_USER"("ID") NOCHECK;             
ALTER TABLE "PUBLIC"."RECOMMEND" ADD CONSTRAINT "PUBLIC"."FKFJYG3S9F79HET4V1PSETDJ4D0" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."SITE_USER"("ID") NOCHECK;  
ALTER TABLE "PUBLIC"."MY_SHELF" ADD CONSTRAINT "PUBLIC"."FKFXAKXE14SFHVSTDFVMY3AI9JW" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."SITE_USER"("ID") NOCHECK;   
ALTER TABLE "PUBLIC"."RECOMMEND" ADD CONSTRAINT "PUBLIC"."FK5MK8TUUDRI12IK3KXXYNBONE7" FOREIGN KEY("TARGET") REFERENCES "PUBLIC"."RECOMMENDATION_TARGET"("ID") NOCHECK;       
ALTER TABLE "PUBLIC"."COLLECTION_BOOK" ADD CONSTRAINT "PUBLIC"."FKOWQJE67QHBMJIH008RV7MLL2Y" FOREIGN KEY("BOOK_ID") REFERENCES "PUBLIC"."BOOK"("ID") NOCHECK; 
ALTER TABLE "PUBLIC"."COLLECTION_BOOK" ADD CONSTRAINT "PUBLIC"."FKNXO9T2T27MNJJE95WXXK25HDX" FOREIGN KEY("COLLECTION_ID") REFERENCES "PUBLIC"."MY_COLLECTION"("ID") NOCHECK;  
ALTER TABLE "PUBLIC"."RECOMMENDATION_TARGET" ADD CONSTRAINT "PUBLIC"."FK2ASC2UJEXG8G501H0NO78S0P8" FOREIGN KEY("BOOK_ID") REFERENCES "PUBLIC"."BOOK"("ID") NOCHECK;           
